<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EuroTrip Quest 2026</title>
    <!-- Carga de Tailwind CSS (para los estilos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Carga de React, ReactDOM y Babel (para ejecutar JSX en el navegador) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <!-- Contenedor principal de React -->
    <div id="root"></div>

    <!-- EL C√ìDIGO COMPLETO DE TU APLICACI√ìN REACT VA AQU√ç -->
    <script type="text/babel">
    
    /* ========= FIX 1: TOMAR useState DE React ========= */
    const { useState } = React;

    /* ========= FIX 2: PLACEHOLDERS PARA LOS √çCONOS =========
       (para que no reviente al renderizar; solo muestran un emoji m√≠nimo)
    */
    const IconPlaceholder = ({ children, className = "" }) => (
      <span className={className} style={{ display: "inline-block", lineHeight: 1 }}>
        {children}
      </span>
    );

    const Heart        = (props) => <IconPlaceholder {...props}>‚ù§Ô∏è</IconPlaceholder>;
    const RotateCcw    = (props) => <IconPlaceholder {...props}>‚ü≤</IconPlaceholder>;
    const MapPin       = (props) => <IconPlaceholder {...props}>üìç</IconPlaceholder>;
    const Map          = (props) => <IconPlaceholder {...props}>üó∫Ô∏è</IconPlaceholder>;
    const Snowflake    = (props) => <IconPlaceholder {...props}>‚ùÑÔ∏è</IconPlaceholder>;
    const Utensils     = (props) => <IconPlaceholder {...props}>üçΩÔ∏è</IconPlaceholder>;
    const Bed          = (props) => <IconPlaceholder {...props}>üõèÔ∏è</IconPlaceholder>;
    const Info         = (props) => <IconPlaceholder {...props}>‚ÑπÔ∏è</IconPlaceholder>;
    const Camera       = (props) => <IconPlaceholder {...props}>üì∏</IconPlaceholder>;
    const DollarSign   = (props) => <IconPlaceholder {...props}>üí∂</IconPlaceholder>;
    const ShoppingCart = (props) => <IconPlaceholder {...props}>üõí</IconPlaceholder>;
    const Bus          = (props) => <IconPlaceholder {...props}>üöå</IconPlaceholder>;
    const Wine         = (props) => <IconPlaceholder {...props}>üç∑</IconPlaceholder>;
    const List         = (props) => <IconPlaceholder {...props}>üìã</IconPlaceholder>;
    const ArrowRight   = (props) => <IconPlaceholder {...props}>‚û°Ô∏è</IconPlaceholder>;

    // --- TUS ARCHIVOS (Usando enlaces de Cloudinary para m√°xima fiabilidad) ---
    const AVATAR_1 = "https://res.cloudinary.com/deit2ncmp/image/upload/avatar1_vrcbah.png"; 
    const AVATAR_2 = "https://res.cloudinary.com/deit2ncmp/image/upload/avatar2_m9izdn.png"; 
    const AVATAR_3 = "https://res.cloudinary.com/deit2ncmp/image/upload/avatar3_q4yxxs.png"; 
    const MAP_BG = "https://res.cloudinary.com/deit2ncmp/image/upload/mapa_qnthdq.png";      
    const PROPOSAL_IMG = "https://res.cloudinary.com/deit2ncmp/image/upload/foto_propuesta_z4f61d.png"; 

    // --- CONFIGURACI√ìN DEL WEBHOOK (¬°URL REAL DE N8N PROPORCIONADA!) ---
    const N8N_WEBHOOK_URL = "https://n8n.inmob1n8n.shop/webhook/eurotrip";
    // --- FIN CONFIGURACI√ìN WEBHOOK ---

    // --- ESTILOS & FUENTES ---
    const RetroStyles = () => (
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        .font-retro { font-family: 'Press Start 2P', cursive; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .animate-float { animation: float 3s ease-in-out infinite; }
        
        @keyframes aurora {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        .aurora-bg {
          background: linear-gradient(270deg, #00ff87, #60efff, #0061ff, #60efff);
          background-size: 400% 400%;
          animation: aurora 15s ease infinite;
        }

        .pixelated { image-rendering: pixelated; }
        
        .modal-tab-active { background-color: white; border-bottom: 4px solid #3b82f6; font-weight: bold; color: #1e3a8a; }
        .modal-tab-inactive { background-color: #e5e7eb; color: #6b7280; }
        
        .list-item { list-style-type: none; margin-bottom: 4px; padding-left: 1.5em; position: relative; }
        .list-item::before { content: '‚òÖ'; color: #ffd700; position: absolute; left: 0; font-size: 0.8em; line-height: 1.4; }
      `}</style>
    );

    // --- COMPONENTES SEGUROS ---
    const getImageUrl = (src) => `${src}`; 

    const AvatarCard = ({ src, label, onClick }) => {
      const [error, setError] = useState(false);
      return (
        <div onClick={onClick} className="group cursor-pointer bg-white p-3 md:p-4 border-4 border-black hover:bg-yellow-100 transition-transform hover:scale-110 shadow-lg flex flex-col items-center w-32 md:w-40">
          <div className="w-24 h-24 md:w-32 md:h-32 flex items-center justify-center overflow-hidden bg-gray-100 mb-2">
            {!error ? <img src={getImageUrl(src)} alt={label} className="w-full h-full object-contain pixelated" onError={() => setError(true)} /> : <span className="text-4xl text-red-500">‚ùå</span>}
          </div>
          <p className="text-[10px] md:text-xs font-bold text-gray-700">{label}</p>
        </div>
      );
    };

    const ProposalImageDisplay = ({ src }) => {
      const [error, setError] = useState(false);
      return (
        <div className="w-full aspect-video bg-black border-8 border-white shadow-2xl mb-8 relative rounded-lg overflow-hidden flex items-center justify-center">
          {!error ? (
            <img src={getImageUrl(src)} alt="Propuesta" className="w-full h-full object-contain pixelated" onError={() => setError(true)} />
          ) : (
            <div className="text-white text-center p-10">
                <p className="text-red-400">Error cargando {src}</p>
                <p className="text-xs text-gray-400">Placeholder de la propuesta final</p>
                <div className="mt-4 text-6xl">üíç</div>
            </div>
          )}
          <div className="absolute bottom-2 right-2 bg-black/60 text-white text-[10px] p-1 px-2 rounded">Ivalo, Finlandia - Enero 2026</div>
        </div>
      );
    };

    // --- DATA SUPER DETALLADA ---
    const CITIES = [
      /* ... AQU√ç VA TODA TU CONSTANTE CITIES SIN CAMBIOS ... */
      /* (la dejo exactamente igual que en tu archivo original) */
      {
        id: 1,
        name: "Barcelona",
        country: "Espa√±a",
        coords: { x: 10, y: 85 },
        stats: { dist: "Inicio", temp: "8-15¬∞C" },
        general: {
          desc: "Capital catalana, cuna de Gaud√≠ y el modernismo. En enero menos turistas, precios bajos y ambiente local aut√©ntico. Perfecta para cal√ßotadas de temporada.",
          must: ["Sagrada Familia", "Park G√ºell", "Barrio G√≥tico", "La Barceloneta", "Mercado Boquer√≠a"],
          tours: ["Free Walking Tour G√≥tico (propina)", "Casa Batll√≥ ~‚Ç¨35"],
          supermarkets: ["Mercadona (m√∫ltiples)", "Carrefour Express"],
          transport: "A N√∫ria: Tren RENFE a Ribes de Freser (~‚Ç¨12, 2h) + Cremallera (~‚Ç¨33 ida/vuelta)"
        },
        lodging: {
          tips: "Zonas: El Raval (bohemio), Gr√†cia (local), Barceloneta (playa). Evitar Las Ramblas (caro/tur√≠stico).",
          cost: "Hostal ‚Ç¨25-45/noche, Hotel 3* ‚Ç¨60-90/noche"
        },
        food: {
          typical: ["Pa amb tom√†quet", "Cal√ßots con romesco (temporada ene-mar)", "Fideu√†", "Crema catalana", "Butifarra con mongetes"],
          spots: ["Can Culleretes (1786, el m√°s antiguo)", "La Boquer√≠a (tapeo)", "Ca l'Estevet (tradicional)"],
          nightlife: ["L'√Änima del Vi (vinos naturales, Born)", "La Vinya del Senyor (frente Santa Mar√≠a del Mar)", "Bodega Joan (tapas+vinos, 80 a√±os)", "Jamboree Jazz Club"]
        },
        wine: {
          regions: "DO Pened√®s, DO Priorat, Cava",
          grapes: "Xarel¬∑lo, Macabeo, Parellada (blancos), Garnacha, Cari√±ena (tintos)",
          try: "Cava Brut Nature, vinos de Priorat, Xarel¬∑lo del Pened√®s"
        },
        ski: null,
        img: "üè∞"
      },
      /* ... (el resto de las 8 ciudades exactamente igual que en tu archivo) ... */
      {
        id: 9,
        name: "Ivalo (Laponia)",
        country: "Finlandia",
        coords: { x: 90, y: 15 },
        stats: { dist: "~2500 km (vuelo)", temp: "-15 a -5¬∞C" },
        general: {
          desc: "Laponia finlandesa, tierra de auroras boreales y noche polar. Enero es temporada alta para ver Northern Lights. Paisajes √°rticos, saunas, y cultura Sami. El gran final m√°gico del viaje.",
          must: ["Auroras Boreales", "Safari huskies", "Saariselk√§ (pueblo cercano)", "Parque Nacional Urho Kekkonen", "Cultura Sami"],
          tours: ["Aurora hunting tour ~‚Ç¨80-120", "Safari huskies ~‚Ç¨120-180", "Motonieve ~‚Ç¨100-150"],
          supermarkets: ["K-Market Ivalo", "Sale"],
          transport: "Vuelo Helsinki‚ÜíIvalo (1.5h) o tren nocturno Helsinki‚ÜíRovaniemi + bus"
        },
        lodging: {
          tips: "Ivalo pueblo (servicios, econ√≥mico). Saariselk√§ (resort, m√°s caro). Caba√±as con techo cristal (premium, reservar meses antes).",
          cost: "Hostel/Cabin b√°sica ‚Ç¨50-80/noche, Hotel ‚Ç¨80-120/noche, Glass igloo ‚Ç¨300-500/noche"
        },
        food: {
          typical: ["Reno (poronk√§ristys)", "Salm√≥n ahumado", "Kalakukko (pastel de pescado)", "Bayas √°rticas", "Pan de centeno"],
          spots: ["Kultahippu (tradicional lapon)", "Hotel Ivalo restaurant", "Saariselk√§ restaurants"],
          nightlife: ["No hay wine bars tradicionales", "Bares de hotel con vistas a auroras", "Cultura tranquila, experiencias en naturaleza"]
        },
        wine: {
          regions: "No es zona vin√≠cola - licores locales",
          grapes: "N/A",
          try: "Lakka (licor de mora √°rtica), Koskenkorva vodka, cerveza Lapin Kulta"
        },
        ski: {
          resort: "Saariselk√§ (15 km pistas, 200 km cross-country)",
          access: "Bus Ivalo-Saariselk√§ 25 min (~‚Ç¨5)",
          cost: "Forfait ~‚Ç¨38/d√≠a, Alquiler ~‚Ç¨30/d√≠a, Cross-country gratuito en muchas rutas",
          tips: "Esqu√≠ principalmente cross-country. Pistas alpinas peque√±as pero con nieve garantizada. La magia est√° en auroras y naturaleza, no en el esqu√≠."
        },
        img: "üåå"
      }
    ];


    // --- APP ---
    const App = () => {
      const [screen, setScreen] = React.useState('intro');
      const [avatar, setAvatar] = React.useState(null);
      const [currentCityIdx, setCurrentCityIdx] = React.useState(0);
      const [showModal, setShowModal] = React.useState(false);
      const [modalTab, setModalTab] = React.useState('general');
      const [noPos, setNoPos] = React.useState({ x: 0, y: 0 });

      const currentCity = CITIES[currentCityIdx];

      const resetGame = () => {
        setScreen('intro');
        setAvatar(null);
        setCurrentCityIdx(0);
        setShowModal(false);
        setModalTab('general');
        setNoPos({ x: 0, y: 0 });
      };

      const sendWebhook = async (response) => {
        if (!N8N_WEBHOOK_URL) {
          console.warn("ADVERTENCIA: URL de webhook no configurada. Saltando env√≠o.");
          return;
        }
        
        try {
          console.log(`Intentando enviar respuesta a n8n: ${response}`);
          
          const payload = {
            timestamp: new Date().toISOString(),
            response: response,
            avatar_selected: avatar,
            final_city: CITIES[CITIES.length - 1].name
          };

          const webhookResponse = await fetch(N8N_WEBHOOK_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(payload),
          });

          if (!webhookResponse.ok) {
            console.error('Error al enviar webhook (Respuesta no OK):', webhookResponse.status, webhookResponse.statusText);
          } else {
            console.log('Webhook enviado con √©xito.');
          }
        } catch (error) {
          console.error('Fallo en la conexi√≥n del webhook (Revisa la URL/CORS):', error.message);
        }
      };

      const handleProposalResponse = (responseType) => {
        sendWebhook(responseType); 
        
        if (responseType === 'SI') {
          setScreen('success');
        } else if (responseType === 'AURORA_FAKE') {
          resetGame();
        }
      };

      const handleNextCity = () => {
        setShowModal(false);
        if (currentCityIdx < CITIES.length - 1) {
          setCurrentCityIdx(prev => prev + 1);
          setTimeout(() => {
             setModalTab('general');
             setShowModal(true);
          }, 1000);
        } else {
          setScreen('proposal');
        }
      };

      const moveNo = () => setNoPos({ x: (Math.random() - 0.5) * 150, y: (Math.random() - 0.5) * 150 });

      if (screen === 'intro') return (
        <div className="min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 font-retro relative overflow-hidden text-center">
          <RetroStyles />
          <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-50"></div>
          <div className="z-10 border-4 border-white p-6 md:p-10 bg-blue-900 shadow-2xl max-w-2xl">
            <h1 className="text-3xl md:text-5xl text-yellow-400 mb-6 leading-relaxed drop-shadow-[4px_4px_0_#000]">
              EUROPE TRIP <br/><span className="text-white text-xl md:text-2xl">Quest 2026</span>
            </h1>
            <p className="text-white mb-8 text-xs md:text-sm leading-6 max-w-lg mx-auto">
              9 Destinos. 4 Pa√≠ses. <br/>
              Desde las tapas de Barcelona hasta las Auroras del √Årtico.
            </p>
            <button onClick={() => setScreen('avatar')} className="bg-red-500 hover:bg-red-600 text-white py-4 px-8 border-b-8 border-r-8 border-red-800 active:border-0 active:translate-y-2 text-xl animate-pulse font-bold">
              COMENZAR AVENTURA
            </button>
          </div>
        </div>
      );

      if (screen === 'avatar') return (
        <div className="min-h-screen bg-blue-500 flex flex-col items-center justify-center p-4 font-retro">
          <h2 className="text-xl md:text-2xl text-white drop-shadow-md mb-8 bg-black/50 p-4 rounded border-2 border-white">ELIGE TU JUGADOR</h2>
          <div className="flex flex-wrap gap-6 justify-center">
            <AvatarCard src={AVATAR_1} label="Con Scuishi" onClick={() => { setAvatar(AVATAR_1); setScreen('map'); setTimeout(() => setShowModal(true), 800); }} />
            <AvatarCard src={AVATAR_2} label="Sommelier" onClick={() => { setAvatar(AVATAR_2); setScreen('map'); setTimeout(() => setShowModal(true), 800); }} />
            <AvatarCard src={AVATAR_3} label="Mochilera" onClick={() => { setAvatar(AVATAR_3); setScreen('map'); setTimeout(() => setShowModal(true), 800); }} />
          </div>
        </div>
      );

      if (screen === 'proposal') return (
        <div className="min-h-screen bg-black flex flex-col items-center justify-center font-retro relative overflow-hidden text-center">
          <div className="absolute inset-0 aurora-bg opacity-80"></div>
          <div className="z-20 w-full max-w-4xl p-4 flex flex-col items-center">
            <ProposalImageDisplay src={PROPOSAL_IMG} />
            <div className="bg-blue-900/95 border-4 border-yellow-400 p-6 md:p-10 shadow-2xl backdrop-blur-sm animate-float rounded-lg max-w-2xl">
              <h1 className="text-2xl md:text-4xl text-white mb-8 drop-shadow-[3px_3px_0_#000] leading-normal">
                ¬øTe quer√©s casar conmigo?
              </h1>
              <div className="flex flex-col md:flex-row gap-4 justify-center items-center">
                <button onClick={() => handleProposalResponse('SI')} className="bg-green-500 hover:bg-green-600 text-white text-lg py-4 px-10 border-b-4 border-green-800 rounded w-full md:w-auto transform hover:scale-105 transition-all">
                  ¬°S√ç! <Heart />
                </button>
                <div onMouseEnter={moveNo} onClick={moveNo} style={{ transform: `translate(${noPos.x}px, ${noPos.y}px)`, transition: 'all 0.2s' }}>
                  <button className="bg-red-500 text-white text-lg py-4 px-10 border-b-4 border-red-800 rounded w-full md:w-auto opacity-50 cursor-not-allowed">
                    NO üò¢
                  </button>
                </div>
              </div>
              <button onClick={() => handleProposalResponse('AURORA_FAKE')} className="mt-6 text-yellow-300 text-xs hover:text-white underline font-normal">
                 Buen intento pero no son auroras realesüòù
              </button>
            </div>
          </div>
        </div>
      );

      if (screen === 'success') return (
        <div className="min-h-screen bg-pink-600 flex flex-col items-center justify-center font-retro relative overflow-hidden text-center p-4">
          <div className="absolute inset-0 aurora-bg opacity-50"></div>
          <div className="z-20 p-8 border-8 border-white bg-pink-800/90 shadow-2xl rounded-xl max-w-lg">
            <h1 className="text-3xl md:text-5xl text-yellow-300 mb-6 drop-shadow-lg animate-pulse">¬°DIJO QUE S√ç! ‚ù§Ô∏è</h1>
            <p className="text-white text-lg md:text-xl mb-8">Nivel Completado: COMPROMISO üíç</p>
            <div className="flex justify-center mb-6">
               {avatar ? <img src={getImageUrl(avatar)} className="w-40 h-40 object-contain animate-float pixelated" alt="Winner" /> : <div className="w-40 h-40 bg-gray-300 rounded flex items-center justify-center text-black">Avatar</div>}
            </div>
            <p className="text-white text-sm">Pr√≥xima parada: El Altar...</p>
            <button onClick={resetGame} className="mt-6 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 border-b-4 border-blue-800 rounded flex items-center justify-center gap-2 font-bold mx-auto text-sm">
              <RotateCcw /> REINICIAR JUEGO
            </button>
          </div>
        </div>
      );

      return (
        <div className="min-h-screen bg-blue-300 font-retro overflow-hidden relative">
          <RetroStyles />
          <div className="absolute inset-0 flex items-center justify-center md:p-8">
            <div className="relative w-full h-full max-w-7xl max-h-[90vh] bg-[#e3d5b8] border-8 border-[#5d4037] shadow-2xl rounded-lg overflow-hidden bg-cover bg-center"
                 style={{ backgroundImage: `url('${getImageUrl(MAP_BG)}')` }}>
              
              <div className="absolute inset-0 bg-black/10"></div>
              {CITIES.map((city, idx) => (
                <div key={city.id} 
                  className={`absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 z-10 cursor-pointer ${idx === currentCityIdx ? 'z-20 scale-125' : 'hover:scale-110'}`}
                  style={{ left: `${city.coords.x}%`, top: `${city.coords.y}%` }}
                  onClick={() => { setCurrentCityIdx(idx); setShowModal(true); }}
                >
                  <div className={`w-6 h-6 md:w-8 md:h-8 rounded-full border-4 shadow-lg flex items-center justify-center ${idx <= currentCityIdx ? 'bg-yellow-400 border-black' : 'bg-gray-400 border-gray-600'}`}>
                     {idx === currentCityIdx && <div className="w-2 h-2 bg-red-600 rounded-full animate-ping"/>}
                  </div>
                  <span className="absolute top-8 left-1/2 -translate-x-1/2 bg-black text-white text-[9px] px-2 py-1 rounded border border-white whitespace-nowrap shadow-lg">
                    {city.name}
                  </span>
                </div>
              ))}

              <div className="absolute w-12 h-12 md:w-16 md:h-16 transition-all duration-[2000ms] ease-in-out z-30 -mt-10 -ml-6 pointer-events-none"
                 style={{ left: `${currentCity.coords.x}%`, top: `${currentCity.coords.y}%` }}>
                 {avatar && <img src={getImageUrl(avatar)} className="w-full h-full object-contain pixelated animate-float" alt="Player" />}
              </div>

              <div className="absolute top-4 left-4 bg-blue-900/90 text-white p-3 border-4 border-white rounded shadow-lg z-40 max-w-[200px]">
                <h3 className="text-yellow-400 text-xs mb-2 border-b border-white/30 pb-1">ESTAD√çSTICAS</h3>
                <p className="text-[10px] mb-1">üìç {currentCity.name}</p>
                <p className="text-[10px] mb-1">üå°Ô∏è {currentCity.stats.temp}</p>
                <p className="text-[10px] mb-2">üöó {currentCity.stats.dist}</p>
                <button onClick={() => setShowModal(true)} className="w-full bg-green-500 text-[10px] py-2 hover:bg-green-600 border-b-4 border-green-700 active:border-b-0 rounded font-bold flex justify-center gap-1 items-center">
                  <Info /> ABRIR GU√çA
                </button>
              </div>
            </div>
          </div>

          {showModal && (
            <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-2 md:p-6 backdrop-blur-sm">
              <div className="bg-white w-full max-w-4xl h-[90vh] md:h-[85vh] flex flex-col border-4 md:border-8 border-blue-900 rounded-lg shadow-2xl animate-float overflow-hidden">
                
                <div className="bg-blue-900 text-white p-4 flex justify-between items-start shrink-0">
                  <div>
                    <h2 className="text-xl md:text-2xl text-yellow-400 font-bold mb-1 flex items-center gap-2">
                      <MapPin /> {currentCity.name}
                    </h2>
                    <span className="text-xs bg-blue-700 px-2 py-1 rounded text-blue-200">{currentCity.country}</span>
                  </div>
                  <button onClick={() => setShowModal(false)} className="text-2xl hover:text-red-400 transition-colors">‚úñ</button>
                </div>

                <div className="flex bg-gray-100 border-b-4 border-gray-300 overflow-x-auto shrink-0 no-scrollbar">
                   {[
                     { id: 'general', icon: Map,        label: 'Turismo' },
                     { id: 'ski',     icon: Snowflake,  label: 'Nieve/Ski' },
                     { id: 'food',    icon: Utensils,   label: 'Gastro/Fiesta' },
                     { id: 'lodging', icon: Bed,        label: 'Alojamiento/Tips' }
                   ].map((tab) => (
                     <button 
                        key={tab.id}
                        onClick={() => setModalTab(tab.id)} 
                        className={`flex-1 p-3 md:p-4 text-xs md:text-sm whitespace-nowrap flex items-center justify-center gap-2 transition-colors ${modalTab === tab.id ? 'modal-tab-active' : 'modal-tab-inactive hover:bg-gray-200'}`}
                        disabled={tab.id === 'ski' && !currentCity.ski}
                        style={{ opacity: tab.id === 'ski' && !currentCity.ski ? 0.5 : 1 }}
                     >
                        <tab.icon /> {tab.label}
                     </button>
                   ))}
                </div>

                <div className="p-4 md:p-8 overflow-y-auto flex-1 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')] font-sans">
                  
                  {modalTab === 'general' && (
                    <div className="space-y-6 animate-fadeIn">
                       <div className="text-center text-6xl mb-4 filter drop-shadow-lg">{currentCity.img}</div>
                       
                       <div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500 shadow-sm">
                          <h3 className="font-bold text-blue-900 mb-2 font-retro text-xs">RESUMEN</h3>
                          <p className="text-sm text-gray-700 leading-relaxed">{currentCity.general.desc}</p>
                       </div>
                       
                       <div className="grid md:grid-cols-2 gap-4">
                          <div className="bg-yellow-50 p-4 rounded-lg border border-yellow-200 shadow-sm">
                             <h4 className="font-bold text-yellow-800 text-xs mb-2 flex items-center gap-2"><Camera /> IMPERDIBLES (MUST)</h4>
                             <ul className="text-xs text-gray-700">
                               {currentCity.general.must.map((item, i) => <li key={i} className="list-item">{item}</li>)}
                             </ul>
                          </div>
                          
                          <div className="bg-purple-50 p-4 rounded-lg border border-purple-200 shadow-sm">
                             <h4 className="font-bold text-purple-800 text-xs mb-2 flex items-center gap-2"><DollarSign /> TOURS RECOMENDADOS</h4>
                             <ul className="text-xs text-gray-700">
                               {currentCity.general.tours.map((item, i) => <li key={i} className="list-item">{item}</li>)}
                             </ul>
                          </div>
                       </div>

                       <div className="grid md:grid-cols-2 gap-4">
                          <div className="bg-green-50 p-3 rounded border border-green-200 flex items-start gap-3 shadow-sm">
                            <ShoppingCart className="text-green-600 shrink-0 mt-1"/>
                            <div>
                              <h4 className="font-bold text-green-800 text-xs">Supermercados (Ahorro)</h4>
                              <ul className="text-xs text-gray-600 pl-4 list-disc list-outside">
                                {currentCity.general.supermarkets.map((item, i) => <li key={i}>{item}</li>)}
                              </ul>
                            </div>
                          </div>
                          <div className="bg-indigo-50 p-3 rounded border border-indigo-200 flex items-start gap-3 shadow-sm">
                            <Bus className="text-indigo-600 shrink-0 mt-1"/>
                            <div>
                              <h4 className="font-bold text-indigo-800 text-xs">Conexi√≥n a Siguiente Destino</h4>
                              <p className="text-xs text-gray-600">{currentCity.general.transport}</p>
                            </div>
                          </div>
                       </div>
                    </div>
                  )}

                  {modalTab === 'ski' && currentCity.ski && (
                    <div className="space-y-6 animate-fadeIn">
                      <div className="bg-blue-600 text-white p-6 rounded-lg shadow-lg text-center">
                        <h3 className="text-2xl font-bold mb-2 font-retro">{currentCity.ski.resort}</h3>
                        <div className="flex flex-wrap justify-center gap-x-6 gap-y-2 mt-4 text-sm font-bold">
                          <span className="bg-white/20 px-3 py-1 rounded">üéüÔ∏è Forfait: {currentCity.ski.cost}</span>
                          <span className="bg-white/20 px-3 py-1 rounded">üéø Alquiler: ~‚Ç¨25-35</span>
                        </div>
                      </div>
                      
                      <div className="bg-white border-2 border-blue-100 p-5 rounded-lg shadow-sm">
                        <h4 className="text-blue-900 font-bold mb-3 flex items-center gap-2 font-retro text-xs"><Bus /> C√ìMO LLEGAR A PISTA</h4>
                        <p className="text-sm text-gray-600 leading-relaxed">{currentCity.ski.access}</p>
                      </div>

                      <div className="bg-yellow-50 border-2 border-yellow-100 p-5 rounded-lg shadow-sm">
                        <h4 className="font-bold text-yellow-900 text-xs mb-3 flex items-center gap-2"><Info /> CONSEJOS √öTILES</h4>
                        <p className="text-sm text-gray-600 leading-relaxed">{currentCity.ski.tips}</p>
                      </div>
                    </div>
                  )}

                  {modalTab === 'food' && (
                    <div className="space-y-5 animate-fadeIn">
                       <div className="bg-orange-50 p-4 border-l-4 border-orange-500 rounded shadow-sm">
                         <h3 className="flex items-center gap-2 font-bold text-orange-800 mb-2 font-retro text-xs"><Utensils /> PLATOS T√çPICOS</h3>
                         <ul className="text-sm text-gray-700 pl-4 list-disc list-outside">
                            {currentCity.food.typical.map((item, i) => <li key={i}>{item}</li>)}
                         </ul>
                       </div>
                       
                       <div className="grid md:grid-cols-2 gap-4">
                          <div className="bg-white p-4 border border-gray-200 rounded shadow-sm">
                            <h4 className="font-bold text-gray-800 text-xs mb-2 flex items-center gap-2"><MapPin /> RESTAURANTES/SPOTS</h4>
                            <ul className="text-xs text-gray-600">
                               {currentCity.food.spots.map((item, i) => <li key={i} className="list-item">üçΩÔ∏è {item}</li>)}
                            </ul>
                          </div>
                          
                          <div className="bg-white p-4 border border-gray-200 rounded shadow-sm">
                            <h4 className="font-bold text-gray-800 text-xs mb-2 flex items-center gap-2"><Wine /> NOCTURNA / WINE BARS</h4>
                            <ul className="text-xs text-gray-600">
                               {currentCity.food.nightlife.map((item, i) => <li key={i} className="list-item">ü•Ç {item}</li>)}
                            </ul>
                          </div>
                       </div>

                       <div className="bg-pink-50 p-4 rounded-lg border-l-4 border-pink-500 shadow-sm">
                          <h3 className="font-bold text-pink-900 mb-2 font-retro text-xs">Vinos Locales ({currentCity.wine.regions})</h3>
                          <p className="text-xs text-gray-700">**Uvas Clave:** {currentCity.wine.grapes}</p>
                          <p className="text-xs text-gray-700 mt-1">**Para Probar:** {currentCity.wine.try}</p>
                       </div>
                    </div>
                  )}

                  {modalTab === 'lodging' && (
                    <div className="space-y-5 animate-fadeIn">
                       <div className="bg-indigo-50 p-5 border-dashed border-2 border-indigo-300 rounded-lg shadow-lg">
                         <h3 className="flex items-center gap-2 font-bold text-indigo-900 mb-3 font-retro text-xs"><Bed /> D√ìNDE ALOJARSE (Ene 2026)</h3>
                         <p className="text-sm text-gray-700 mb-4">{currentCity.lodging.tips}</p>
                         <div className="bg-white p-3 rounded text-center border border-indigo-100">
                           <span className="text-xs font-bold text-indigo-600">Costos estimados por noche (Ene '26):</span>
                           <p className="text-sm text-gray-800 mt-1">{currentCity.lodging.cost}</p>
                         </div>
                       </div>
                       
                       <div className="bg-gray-100 p-4 rounded-lg border-l-4 border-gray-400 shadow-sm">
                          <h4 className="font-bold text-gray-700 text-xs mb-2 flex items-center gap-2"><List /> NOTAS DE VIAJE</h4>
                          <ul className="text-xs text-gray-600 list-disc pl-4">
                            <li>Recuerda que enero es temporada alta de esqu√≠: reserva alojamiento y forfaits con antelaci√≥n.</li>
                          </ul>
                       </div>
                    </div>
                  )}

                </div>

                <div className="p-4 bg-gray-50 border-t-4 border-gray-300 text-right flex justify-end shrink-0">
                   {currentCityIdx < CITIES.length - 1 ? (
                     <button onClick={handleNextCity} className="bg-green-500 hover:bg-green-600 text-white px-6 py-3 border-b-4 border-green-800 rounded active:translate-y-1 active:border-b-0 flex items-center gap-2 font-retro text-xs md:text-sm transition-all shadow-lg">
                       SIGUIENTE NIVEL <ArrowRight />
                     </button>
                   ) : (
                     <button onClick={handleNextCity} className="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 border-b-4 border-purple-900 rounded animate-pulse flex items-center gap-2 font-retro text-xs md:text-sm shadow-lg">
                       DESTINO FINAL <Heart />
                     </button>
                   )}
                </div>

              </div>
            </div>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    </script>
</body>
</html>
